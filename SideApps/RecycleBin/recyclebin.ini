; Shortcut app to Recycle Bin with a few functions.
[Rainmeter]
Update=50
DefaultUpdateDivider=-1
AccurateText=1

[Metadata]
Name=Blue Archive - Recycle Bin
Author=Xenon257R
Information=A Blue Archive themed Recycle Bin.
Version=1.0.0
License=Creative Commons Attribution - Non - Commercial - Share Alike 3.0

[Variables]
@includeConfig=#@#config.inc
RecycleBinButton=#AppSize#
Padding=10

[RecycleBinStats]
Measure=RecycleManager
RecycleType=Size
IfAboveValue=0
IfAboveAction=[!SetOption RecycleBin ImageName "#@#icons\recyclebinfull.png"][!UpdateMeter RecycleBin][!Redraw]
IfEqualValue=0
IfEqualAction=[!SetOption RecycleBin ImageName "#@#icons\recyclebinempty.png"][!UpdateMeter RecycleBin][!Redraw]
DynamicVariables=1
UpdateDivider=40

[RecycleBinCount]
Measure=RecycleManager
RecycleType=Count
DynamicVariables=1
UpdateDivider=40

[StatsByteChanger]
Measure=Calc
Formula=RecycleBinStats / (1024 * 1024)
DynamicVariables=1
UpdateDivider=40

[OpenRecycleBin]
Measure=Calc
Formula=0
IfAboveValue=0
IfAboveAction=[!CommandMeasure "RecycleBinStats" "OpenBin"][!SetOption OpenRecycleBin Formula "0"][!UpdateMeasure OpenRecycleBin]
DynamicVariables=1

[RecycleBin]
Meter=Image
H=#RecycleBinButton#
X=(#Padding# + #AppHalfWidth# - (#RecycleBinButton# / 2))
Y=((#AppSize# - #RecycleBinButton#) / 2)
ImageName=#@#icons\recyclebinempty.png
LeftMouseDownAction=[!SetVariable RecycleBinButton #AppPress#][!SetOption OpenRecycleBin Formula "1"][!UpdateMeter RecycleBin]
LeftMouseUpAction=[!SetVariable RecycleBinButton #AppSize#][!UpdateMeter RecycleBin][!UpdateMeasure OpenRecycleBin]
MouseOverAction=[!UpdateMeasure *][!UpdateMeter *][!ShowMeterGroup "RecycleInfoGroup"]
MouseLeaveAction=[!SetVariable RecycleBinButton #AppSize#][!SetOption OpenRecycleBin Formula "0"][!HideMeterGroup "RecycleInfoGroup"][!UpdateMeter RecycleBin]
PreserveAspectRatio=1
DynamicVariables=1

[RecycleBinText]
Meter=String
MeterStyle=TextStyle
StringEffect=Border 
FontEffectColor=255,255,255,255
FontSize=15
Text=Recycle Bin
X=(#Padding# + #AppHalfWidth#)
Y=(#AppSize# * 0.8)

; [RecycleBinInfoBubble]
; Meter=Shape
; Group=RecycleInfoGroup
; Shape=Rectangle (#AppSize# * 1.3),((#AppSize# / 2) - 20),220,40,20 | StrokeWidth 0 | Fill Color 0,0,255,122
; Shape2=Rectangle ((#AppSize# * 1.3) - 2),((#AppSize# / 2) - 10),20,20 | StrokeWidth 0 | Fill Color 0,0,255,122 | Rotate 45
; Shape3=Combine Shape | Union Shape2
; DynamicVariables=1
; Hidden=1

[RecycleBinInfoBubbleLeftEnd]
Meter=Shape
Group=RecycleInfoGroup
Shape=Ellipse 0,0,20 | StrokeWidth 0 | Fill Color 0,0,255,122
Shape2=Rectangle 0,-20,20,40 | StrokeWidth 0 | Fill Color 0,0,255,122
Shape3=Rectangle -22,-10,20,20 | StrokeWidth 0 | Fill Color 0,0,255,122 | Rotate 45
Shape4=Combine Shape | Exclude Shape2 | Union Shape3
X=(#AppSize# * 1.5)
Y=(#AppSize# / 2)
Hidden=1

[RecycleBinInfoText]
Meter=String
MeterStyle=PopUpStyle
Group=RecycleInfoGroup
MeasureName=StatsByteChanger
MeasureName2=RecycleBinCount
Text=%2 Files, %1 MB.
X=r
Y=(#AppSize# / 2)
InlineSetting=Color | 80,197,249,255
InlinePattern=^(.*) Files
InlineSetting2=Color | 80,197,249,255
InlinePattern2=^.*,(.*) MB
DynamicVariables=1

[RecycleBinInfoBubbleRightEnd]
Meter=Shape
Group=RecycleInfoGroup
Shape=Ellipse 0,0,20 | StrokeWidth 0 | Fill Color 0,0,255,122
Shape2=Rectangle -20,-20,20,40 | StrokeWidth 0 | Fill Color 0,0,255,122
Shape3=Combine Shape | Exclude Shape2
X=R
Y=(#AppSize# / 2)
Hidden=1

; [BinDebug]
; Meter=String
; MeterStyle=TextStyle
; MeasureName=RecycleBinStats
; FontSize=8
; Text=Storage Content: %1
; X=#AppHalfWidth#
; Y=(#AppSize#) + 30