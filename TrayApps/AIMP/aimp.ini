; Shortcut app to the AIMP client.
[Rainmeter]
Update=50
DefaultUpdateDivider=-1
AccurateText=1

[Metadata]
Name=Blue Archive - AIMP
Author=Xenon257R
Information=A Blue Archive themed AIMP link.
Version=1.0.0
License=Creative Commons Attribution - Non - Commercial - Share Alike 3.0

[Variables]
@includeConfig=#@#config.inc
AIMPButton=#IconSize#

[PlayerStatus]
Measure=NowPlaying
PlayerName=AIMP
PlayerType=Status
UpdateDivider=20
IfCondition=PlayerStatus=0
IfTrueAction=[!SetOption "AIMP" "ImageName" "#@#icons\aimp.png"][!UpdateMeter "AIMP"]
IfFalseAction=[!SetOption "AIMP" "ImageName" "#@#icons\aimp_on.png"][!UpdateMeter "AIMP"]

[OpenAIMP]
Measure=Calc
Formula=0
IfAboveValue=0
IfAboveAction=["C:\Program Files (x86)\AIMP\AIMP.exe"][!SetOption OpenAIMP Formula "0"][!UpdateMeasure OpenAIMP]
DynamicVariables=1

[OpenHelper]
Measure=Calc
Formula=0
IfAboveValue=0
IfAboveAction=[!ToggleConfig "BlueArchive\AudioPlayer" "audioplayer.ini"][!SetOption OpenHelper Formula "0"][!UpdateMeasure OpenHelper]
DynamicVariables=1

[AIMP]
Meter=Image
H=#AIMPButton#
X=(#IconPadding# + ((#IconSize# - #AIMPButton#) / 2))
Y=((#IconSize# - #AIMPButton#) / 2)
ImageName=#@#icons\aimp.png
LeftMouseDownAction=#Click#[!SetVariable AIMPButton #IconPress#][!SetOption OpenAIMP Formula "1"][!UpdateMeter AIMP]
LeftMouseUpAction=[!SetVariable AIMPButton #IconSize#][!UpdateMeter AIMP][!UpdateMeasure OpenAIMP]
RightMouseDownAction=#Click#[!SetVariable AIMPButton #IconPress#][!SetOption OpenHelper Formula "1"][!UpdateMeter AIMP]
RightMouseUpAction=[!SetVariable AIMPButton #IconSize#][!UpdateMeter AIMP][!UpdateMeasure OpenHelper]
MouseLeaveAction=[!SetVariable AIMPButton #IconSize#][!SetOption OpenAIMP Formula "0"][!SetOption OpenHelper Formula "0"][!UpdateMeter AIMP]
PreserveAspectRatio=1
DynamicVariables=1

[AIMPText]
Meter=String
MeterStyle=TextStyle
FontSize=15
Text=AIMP
X=((#IconPadding#) + #IconSize# / 2)
Y=#IconSize#