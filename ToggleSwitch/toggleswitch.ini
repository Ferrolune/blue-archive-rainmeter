; Master switch for toggling on and off all the related Rainmeter widgets.
[Rainmeter]
Update=50
DefaultUpdateDivider=-1
AccurateText=1

[Metadata]
Name=Blue Archive Toggle Switch
Author=Xenon257R
Information=The master switch to hide/unhide all the related Rainmeter widgets.
Version=1.0.0
License=Creative Commons Attribution - Non - Commercial - Share Alike 3.0

[Variables]
@includeConfig=#@#config.inc
SkewOffset=12
XPos=1430
YPos=70
XPosMove=0
YPosMove=-60
Timeout=(60 * 10)

[ToggleScript]
Measure=Script
ScriptFile=#@#lua\toggleswitch.lua

[IdleTime]
Measure=SysInfo
SysInfoType=IDLE_TIME
IfAboveValue=#Timeout#
IfAboveAction=[&ToggleScript:ToggleCommand(0)]
UpdateDivider=20

; [DebugTime]
; Meter=String
; MeasureName=IdleTime
; X=20
; Y=50
; Text=%1
; DynamicVariables=1
; UpdateDivider=20

[HideWidgets]
Measure=Calc
Formula=0
IfAboveValue=0
IfAboveAction=[&ToggleScript:ToggleCommand()][!SetOption HideWidgets Formula "0"][!UpdateMeasure HideWidgets]
DynamicVariables=1

[ToggleOffSwitchShadow]
Meter=Shape
Group=ToggleBoxGroup
Shape=Rectangle (#SkewOffset# + #DropShadowOffset#),#DropShadowOffset#,#OptionsSize# * 2,#OptionsHeight#,#OptionsEdge# | FillColor #ShadowColor# | Skew -10,0 | StrokeWidth 0

[ToggleOffSwitch]
Meter=Shape
Group=ToggleBoxGroup
Shape=Rectangle #SkewOffset#,0,#OptionsSize# * 2,#OptionsHeight#,#OptionsEdge# | FillColor #TrayColor# | Skew -10,0 | StrokeWidth 0

[ToggleOnSwitchShadow]
Meter=Shape
Group=ToggleBoxGroup
Shape=Rectangle (#SkewOffset# + #DropShadowOffset#),#DropShadowOffset#,#OptionsSize# * 2,#OptionsHeight#,#OptionsEdge# | FillColor #ShadowColor# | Skew -10,0 | StrokeWidth 0
Hidden=1

[ToggleOnSwitch]
Meter=Shape
Group=ToggleBoxGroup
Shape=Rectangle #SkewOffset#,0,#OptionsSize# * 2,#OptionsHeight#,#OptionsEdge# | FillColor #TrayColor# | Skew -10,0 | StrokeWidth 0
Hidden=1

[ToggleOnImage]
Meter=Image
ImageName=#@#assets/Common_UIHide_Icon2.png
ImageTint=71,100,154
H=(#OptionsHeight# * 2 / 3)
X=30
Y=(#OptionsHeight# * 1 / 6)
Hidden=1

[ToggleOffImage]
Meter=Image
ImageName=#@#assets/Common_UIHide_Icon.png
ImageTint=71,100,154
H=(#OptionsHeight# * 2 / 3)
X=30
Y=(#OptionsHeight# * 1 / 6)

[ToggleHitbox]
Meter=Shape
Shape=Rectangle #SkewOffset#,0,#OptionsSize# * 2,#OptionsHeight# | StrokeWidth 0 | FillColor 0,0,0,0
LeftMouseDownAction=#Click#[!SetOption HideWidgets Formula "1"]
LeftMouseUpAction=[!UpdateMeasure HideWidgets]
MouseLeaveAction=[!SetOption HideWidgets Formula "0"]

[ToggleHiddenHitbox]
Meter=Shape
Shape=Rectangle #SkewOffset#,0,#OptionsSize# * 2,#OptionsHeight# | StrokeWidth 0 | FillColor 0,0,0,1
MouseOverAction=[!ShowMeter "ToggleOnImage"][!ShowMeter "ToggleOnSwitch"][!ShowMeter "ToggleOnSwitchShadow"]
MouseLeaveAction=[!HideMeter "ToggleOnImage"][!HideMeter "ToggleOnSwitch"][!HideMeter "ToggleOnSwitchShadow"]
Hidden=1